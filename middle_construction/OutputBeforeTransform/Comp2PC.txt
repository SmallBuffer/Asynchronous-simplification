||(p:dbs)Atomic_Begin
send(p,(c,prop))
id,val<-receive(P)
if(*)
msg:=Commit
else
msg:=Abort
Atomic_End
;
||(p:dbs)Atomic_Begin
send(id,msg);
msg<-receive(p)
if(msg=Abort)
abort:=true
Atomic_End
if(abort=false){
reply:=Commit;
committed:=true
}
else
reply:=Abort
||(p:dbs)Atomic_Begin
send(p,reply)
decision<-receive(P)
if(decision=Commit)
value:=val
Atomic_End
;
||(p:dbs)Atomic_Begin
send(id,Ack)
_<-receive(p)
Atomic_End
